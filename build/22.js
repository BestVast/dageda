webpackJsonp([22],{708:function(l,n,u){"use strict";function t(l){return i._19(0,[(l()(),i.Z(0,0,null,null,7,"a",[["class","weui-grid"]],[[2,"xuanzhong",null]],[[null,"click"]],function(l,n,u){var t=!0;if("click"===n){t=!1!==l.component.clickSelect(l.context.index)&&t}return t},null,null)),(l()(),i._18(-1,null,["\n              "])),(l()(),i.Z(2,0,null,null,1,"p",[["class","weui-grid__label"]],null,null,null,null,null)),(l()(),i._18(3,null,["","元"])),(l()(),i._18(-1,null,["\n              "])),(l()(),i.Z(5,0,null,null,1,"p",[["class","bel"]],null,null,null,null,null)),(l()(),i._18(6,null,["",""])),(l()(),i._18(-1,null,["\n          "]))],null,function(l,n){l(n,0,0,n.component.isSelect(n.context.index));l(n,3,0,n.context.$implicit.price);l(n,6,0,n.context.$implicit.name)})}function a(l){return i._19(0,[(l()(),i.Z(0,0,null,null,3,"div",[["class","lv"]],null,null,null,null,null)),(l()(),i.Z(1,0,null,null,1,"a",[],null,null,null,null,null)),(l()(),i._18(-1,null,["￥"])),(l()(),i._18(3,null,["",""]))],null,function(l,n){l(n,3,0,n.component.getSumPrice())})}function e(l){return i._19(0,[(l()(),i.Z(0,0,null,null,10,"ion-header",[],null,null,null,null,null)),i.Y(1,16384,null,0,y.a,[v.a,i.j,i.z,[2,Z.a]],null,null),(l()(),i._18(-1,null,["\n\n  "])),(l()(),i.Z(3,0,null,null,6,"ion-navbar",[["class","toolbar"]],[[8,"hidden",0],[2,"statusbar-padding",null]],null,null,C.b,C.a)),i.Y(4,49152,null,0,w.a,[P.a,[2,Z.a],[2,x.a],v.a,i.j,i.z],null,null),(l()(),i._18(-1,3,["\n    "])),(l()(),i.Z(6,0,null,3,2,"ion-title",[],null,null,null,Y.b,Y.a)),i.Y(7,49152,null,0,j.a,[v.a,i.j,i.z,[2,S.a],[2,w.a]],null,null),(l()(),i._18(-1,0,["购买置顶券"])),(l()(),i._18(-1,3,["\n  "])),(l()(),i._18(-1,null,["\n\n"])),(l()(),i._18(-1,null,["\n\n\n"])),(l()(),i.Z(12,0,null,null,88,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,A.b,A.a)),i.Y(13,4374528,null,0,I.a,[v.a,z.a,N.a,i.j,i.z,P.a,q.a,i.u,[2,Z.a],[2,x.a]],null,null),(l()(),i._18(-1,1,["\n    "])),(l()(),i.Z(15,0,null,1,30,"div",[["class","weui-cells mt0"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n      "])),(l()(),i.Z(17,0,null,null,4,"div",[["class","weui-grids"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n          "])),(l()(),i.U(16777216,null,null,1,null,t)),i.Y(20,802816,null,0,V.h,[i.I,i.F,i.p],{ngForOf:[0,"ngForOf"]},null),(l()(),i._18(-1,null,["\n      "])),(l()(),i._18(-1,null,["\n\n"])),(l()(),i.Z(23,0,null,null,18,"div",[["class","weui-cell jiage"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(25,0,null,null,11,"div",[["class","weui-cell__bd"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n        "])),(l()(),i.Z(27,0,null,null,8,"input",[["class","weui-input"],["pattern","[0-9]*"],["placeholder","输入整数"],["style","text-align: left;font-size: 15px"],["type","number"]],[[1,"pattern",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"],[null,"change"]],function(l,n,u){var t=!0,a=l.component;if("input"===n){t=!1!==i._11(l,28)._handleInput(u.target.value)&&t}if("blur"===n){t=!1!==i._11(l,28).onTouched()&&t}if("compositionstart"===n){t=!1!==i._11(l,28)._compositionStart()&&t}if("compositionend"===n){t=!1!==i._11(l,28)._compositionEnd(u.target.value)&&t}if("change"===n){t=!1!==i._11(l,29).onChange(u.target.value)&&t}if("input"===n){t=!1!==i._11(l,29).onChange(u.target.value)&&t}if("blur"===n){t=!1!==i._11(l,29).onTouched()&&t}if("ngModelChange"===n){t=!1!==(a.monthNum=u)&&t}return t},null,null)),i.Y(28,16384,null,0,R.b,[i.A,i.j,[2,R.a]],null,null),i.Y(29,16384,null,0,R.m,[i.A,i.j],null,null),i.Y(30,540672,null,0,R.j,[],{pattern:[0,"pattern"]},null),i._14(1024,null,R.e,function(l){return[l]},[R.j]),i._14(1024,null,R.f,function(l,n){return[l,n]},[R.b,R.m]),i.Y(33,671744,null,0,R.i,[[8,null],[2,R.e],[8,null],[2,R.f]],{model:[0,"model"]},{update:"ngModelChange"}),i._14(2048,null,R.g,null,[R.i]),i.Y(35,16384,null,0,R.h,[R.g],null,null),(l()(),i._18(-1,null,["\n    "])),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(38,0,null,null,2,"div",[["class","weui-cell__hd"]],null,null,null,null,null)),(l()(),i.Z(39,0,null,null,1,"label",[["class","weui-label"],["style","font-size: 15px"]],null,null,null,null,null)),(l()(),i._18(-1,null,["小时"])),(l()(),i._18(-1,null,["\n"])),(l()(),i._18(-1,null,["\n"])),(l()(),i.U(16777216,null,null,1,null,a)),i.Y(44,16384,null,0,V.i,[i.I,i.F],{ngIf:[0,"ngIf"]},null),(l()(),i._18(-1,null,["\n"])),(l()(),i._18(-1,1,["\n\n"])),(l()(),i.Z(47,0,null,1,1,"div",[["class","weui-cells__title"]],null,null,null,null,null)),(l()(),i._18(-1,null,["结算付方式"])),(l()(),i._18(-1,1,["\n"])),(l()(),i.Z(50,0,null,1,43,"div",[["class","weui-cells weui-cells_checkbox lxf"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n"])),(l()(),i.Z(52,0,null,null,19,"label",[["class","weui-cell weui-check__label"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(54,0,null,null,0,"img",[["class","paymentmethod_imgs"],["src","assets/imgs/wx.png"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n        "])),(l()(),i.Z(56,0,null,null,4,"div",[["class","weui-cell__bd"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n        "])),(l()(),i.Z(58,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),i._18(-1,null,["微信"])),(l()(),i._18(-1,null,["\n    "])),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(62,0,null,null,8,"div",[["class","weui-cell__ft"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n        "])),(l()(),i.Z(64,0,null,null,3,"ion-checkbox",[["color","#04d580"],["name","raaa"],["type","radio"]],[[2,"checkbox-disabled",null]],[[null,"click"]],function(l,n,u){var t=!0,a=l.component;if("click"===n){t=!1!==i._11(l,66)._click(u)&&t}if("click"===n){t=!1!==a.clickInput(u,"1")&&t}return t},F.b,F.a)),i._14(5120,null,R.f,function(l){return[l]},[M.a]),i.Y(66,1228800,null,0,M.a,[v.a,O.a,[2,T.a],i.j,i.z],{color:[0,"color"],checked:[1,"checked"]},null),(l()(),i._18(-1,null,["\n        "])),(l()(),i._18(-1,null,["\n            "])),(l()(),i._18(-1,null,["\n            "])),(l()(),i._18(-1,null,["\n    "])),(l()(),i._18(-1,null,["\n"])),(l()(),i._18(-1,null,["\n"])),(l()(),i.Z(73,0,null,null,19,"label",[["class","weui-cell weui-check__label"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(75,0,null,null,0,"img",[["class","paymentmethod_img"],["src","assets/imgs/zfb.png"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(77,0,null,null,4,"div",[["class","weui-cell__bd"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n        "])),(l()(),i.Z(79,0,null,null,1,"p",[],null,null,null,null,null)),(l()(),i._18(-1,null,["支付宝"])),(l()(),i._18(-1,null,["\n    "])),(l()(),i._18(-1,null,["\n    "])),(l()(),i.Z(83,0,null,null,8,"div",[["class","weui-cell__ft"]],null,null,null,null,null)),(l()(),i._18(-1,null,["\n        "])),(l()(),i.Z(85,0,null,null,3,"ion-checkbox",[["color","#04d580"],["name","raaa"],["type","radio"]],[[2,"checkbox-disabled",null]],[[null,"click"]],function(l,n,u){var t=!0,a=l.component;if("click"===n){t=!1!==i._11(l,87)._click(u)&&t}if("click"===n){t=!1!==a.clickInput(u,"2")&&t}return t},F.b,F.a)),i._14(5120,null,R.f,function(l){return[l]},[M.a]),i.Y(87,1228800,null,0,M.a,[v.a,O.a,[2,T.a],i.j,i.z],{color:[0,"color"],checked:[1,"checked"]},null),(l()(),i._18(-1,null,["\n    "])),(l()(),i._18(-1,null,["\n        "])),(l()(),i._18(-1,null,["\n        "])),(l()(),i._18(-1,null,["\n    "])),(l()(),i._18(-1,null,["\n"])),(l()(),i._18(-1,null,["\n"])),(l()(),i._18(-1,1,["\n"])),(l()(),i.Z(95,0,null,1,4,"div",[["class","weui-btn-area"]],null,[[null,"click"]],function(l,n,u){var t=!0;if("click"===n){t=!1!==l.component.clickRecharge()&&t}return t},null,null)),(l()(),i._18(-1,null,["\n"])),(l()(),i.Z(97,0,null,null,1,"a",[["class","weui-btn weui-btn_primary"]],null,null,null,null,null)),(l()(),i._18(-1,null,["立即支付"])),(l()(),i._18(-1,null,["\n"])),(l()(),i._18(-1,1,["\n"])),(l()(),i._18(-1,null,["\n"]))],function(l,n){var u=n.component;l(n,20,0,u.list);l(n,30,0,"[0-9]*");l(n,33,0,u.monthNum);l(n,44,0,u.monthNum>0);l(n,66,0,"#04d580","1"==u.payStyle);l(n,87,0,"#04d580","2"==u.payStyle)},function(l,n){l(n,3,0,i._11(n,4)._hidden,i._11(n,4)._sbPadding);l(n,12,0,i._11(n,13).statusbarPadding,i._11(n,13)._hasRefresher);l(n,27,0,i._11(n,30).pattern?i._11(n,30).pattern:null,i._11(n,35).ngClassUntouched,i._11(n,35).ngClassTouched,i._11(n,35).ngClassPristine,i._11(n,35).ngClassDirty,i._11(n,35).ngClassValid,i._11(n,35).ngClassInvalid,i._11(n,35).ngClassPending);l(n,64,0,i._11(n,66)._disabled);l(n,85,0,i._11(n,87)._disabled)})}Object.defineProperty(n,"__esModule",{value:!0});var i=u(1),o=(u(0),u(32),u(186)),s=(u(57),u(388)),c=(u(200),function(){function l(l,n,u,t,a){this.dataService=l,this.alert=n,this.thirdPay=u,this.navCtrl=t,this.navParams=a,this.list=[],this.selectVip=0,this.unitPrice=0,this.payStyle="1"}return l.prototype.ionViewDidLoad=function(){console.log("ionViewDidLoad PurchaseOfcouponPage"),this.getList()},l.prototype.getList=function(){var l=this;this.dataService.postRequest(s.a.TopCoupons_API,{},function(n){if(n.success){l.list=n.data;var u=l.list[0];u.price>0&&(l.unitPrice=u.price)}})},l.prototype.getSumPrice=function(){var l=this.monthNum*this.unitPrice;return l>0?l+"":""},l.prototype.clickInput=function(l,n){l&&l.stopPropagation(),this.payStyle=this.payStyle==n?"0":n,console.log(this.payStyle)},l.prototype.clickRecharge=function(){var l=this;if("0"!=this.payStyle){var n={type:"2",days:"",money:"",way:this.payStyle,top_coupons_id:"",vip_template_id:""};if(this.monthNum>0)n.money=this.monthNum*this.unitPrice+"",n.days=this.monthNum+"";else{var u=this.list[this.selectVip];n.money=u.price,n.top_coupons_id=u.id}console.log(n),this.dataService.postRequest(s.a.ApplyInfo_API,n,function(n){l.alert.toast({message:n.message,position:"middle",duration:2e3}),n.success&&("1"==l.payStyle?l.thirdPay.weChatPay(n.data.data).then(function(n){l.payCallback(n)}):l.thirdPay.aliPay(n.data.data.alipaydata).then(function(n){l.payCallback(n)}))})}else this.alert.toast({message:"请选择支付方式",position:"middle",duration:2e3})},l.prototype.payCallback=function(l){var n=this;this.showAlert(l.message,function(){if("0"==l.code){n.alert.toast({message:"成功购买置顶券",position:"middle",duration:2e3,fn:function(){var l=n.navParams.get("action");l&&l("success").then(function(l){console.log("result",l)},function(l){console.log("error",l)}),n.navCtrl.pop()}});n.dataService.postRequest("1"==n.payStyle?s.a.NotifyWeixin_API:s.a.NotifyAlipay_API,{},function(l){l.success||n.alert.toast({message:l.message,position:"middle",duration:5e3})},!0,!1)}})},l.prototype.showAlert=function(l,n){this.alert.toast({message:l,duration:2e3,position:"bottom",fn:function(){n&&n()}})},l.prototype.clickSelect=function(l){this.selectVip=l,this.monthNum=null},l.prototype.isSelect=function(l){return this.selectVip==l&&(this.monthNum<=0||null==this.monthNum)},l}()),r=function(){return function(){}}(),_=u(187),d=u(188),p=u(189),h=u(190),b=u(191),f=u(192),g=u(193),m=u(194),k=u(195),y=u(196),v=u(3),Z=u(7),C=u(734),w=u(56),P=u(12),x=u(28),Y=u(735),j=u(185),S=u(83),A=u(387),I=u(30),z=u(6),N=u(13),q=u(38),V=u(19),R=u(20),F=u(742),M=u(204),O=u(25),T=u(27),L=u(58),X=u(61),D=u(16),U=i.X({encapsulation:2,styles:[],data:{}}),B=i.V("page-purchase-ofcoupon",c,function(l){return i._19(0,[(l()(),i.Z(0,0,null,null,1,"page-purchase-ofcoupon",[],null,null,null,e,U)),i.Y(1,49152,null,0,c,[o.a,L.a,X.a,x.a,D.a],null,null)],null,null)},{},{},[]),W=u(84),$=u(47);u.d(n,"PurchaseOfcouponPageModuleNgFactory",function(){return E});var E=i.W(r,[],function(l){return i._7([i._8(512,i.i,i.S,[[8,[_.a,d.a,p.a,h.a,b.a,f.a,g.a,m.a,k.a,B]],[3,i.i],i.s]),i._8(4608,V.k,V.j,[i.r,[2,V.s]]),i._8(4608,R.n,R.n,[]),i._8(4608,R.c,R.c,[]),i._8(512,V.b,V.b,[]),i._8(512,R.l,R.l,[]),i._8(512,R.d,R.d,[]),i._8(512,R.k,R.k,[]),i._8(512,W.a,W.a,[]),i._8(512,W.b,W.b,[]),i._8(512,r,r,[]),i._8(256,$.a,c,[])])})},734:function(l,n,u){"use strict";function t(l){return a._19(0,[(l()(),a.Z(0,0,null,null,1,"div",[["class","toolbar-background"]],null,null,null,null,null)),a.Y(1,278528,null,0,e.g,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),a.Z(2,0,null,null,8,"button",[["class","back-button"],["ion-button","bar-button"]],[[8,"hidden",0]],[[null,"click"]],function(l,n,u){var t=!0;if("click"===n){t=!1!==l.component.backButtonClick(u)&&t}return t},i.b,i.a)),a.Y(3,278528,null,0,e.g,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Y(4,1097728,null,0,o.a,[[8,"bar-button"],s.a,a.j,a.z],null,null),(l()(),a.Z(5,0,null,0,2,"ion-icon",[["class","back-button-icon"],["role","img"]],[[2,"hide",null]],null,null,null,null)),a.Y(6,278528,null,0,e.g,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a.Y(7,147456,null,0,c.a,[s.a,a.j,a.z],{name:[0,"name"]},null),(l()(),a.Z(8,0,null,0,2,"span",[["class","back-button-text"]],null,null,null,null,null)),a.Y(9,278528,null,0,e.g,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(l()(),a._18(10,null,["",""])),a._10(null,0),a._10(null,1),a._10(null,2),(l()(),a.Z(14,0,null,null,2,"div",[["class","toolbar-content"]],null,null,null,null,null)),a.Y(15,278528,null,0,e.g,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a._10(null,3)],function(l,n){var u=n.component;l(n,1,0,"toolbar-background","toolbar-background-"+u._mode);l(n,3,0,"back-button","back-button-"+u._mode);l(n,6,0,"back-button-icon","back-button-icon-"+u._mode);l(n,7,0,u._bbIcon);l(n,9,0,"back-button-text","back-button-text-"+u._mode);l(n,15,0,"toolbar-content","toolbar-content-"+u._mode)},function(l,n){var u=n.component;l(n,2,0,u._hideBb);l(n,5,0,a._11(n,7)._hidden);l(n,10,0,u._backText)})}u.d(n,"a",function(){return r}),n.b=t;var a=u(1),e=u(19),i=u(53),o=u(29),s=u(3),c=u(54),r=(u(7),u(28),a.X({encapsulation:2,styles:[],data:{}}))},735:function(l,n,u){"use strict";function t(l){return a._19(2,[(l()(),a.Z(0,0,null,null,2,"div",[["class","toolbar-title"]],null,null,null,null,null)),a.Y(1,278528,null,0,e.g,[a.p,a.q,a.j,a.A],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),a._10(null,0)],function(l,n){l(n,1,0,"toolbar-title","toolbar-title-"+n.component._mode)},null)}u.d(n,"a",function(){return i}),n.b=t;var a=u(1),e=u(19),i=(u(3),a.X({encapsulation:2,styles:[],data:{}}))},742:function(l,n,u){"use strict";function t(l){return a._19(0,[(l()(),a.Z(0,0,null,null,1,"div",[["class","checkbox-icon"]],[[2,"checkbox-checked",null]],null,null,null,null)),(l()(),a.Z(1,0,null,null,0,"div",[["class","checkbox-inner"]],null,null,null,null,null)),(l()(),a.Z(2,0,null,null,2,"button",[["class","item-cover"],["ion-button","item-cover"],["role","checkbox"],["type","button"]],[[8,"id",0],[1,"aria-checked",0],[1,"aria-labelledby",0],[1,"aria-disabled",0]],null,null,e.b,e.a)),a.Y(3,1097728,null,0,i.a,[[8,"item-cover"],o.a,a.j,a.z],null,null),(l()(),a._18(-1,0,[" "]))],null,function(l,n){var u=n.component;l(n,0,0,u._value);l(n,2,0,u.id,u._value,u._labelId,u._disabled)})}u.d(n,"a",function(){return s}),n.b=t;var a=u(1),e=u(53),i=u(29),o=u(3),s=(u(25),a.X({encapsulation:2,styles:[],data:{}}))}});